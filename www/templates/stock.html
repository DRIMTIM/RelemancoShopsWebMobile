<ion-view view-title="Actualizar Stock">
    <ion-content>
        <div class="bar bar-header bar-assertive text-center" ng-if="listaComercios.length === 0">
            <div class="title"><i class="ion-alert-circled"></i>&nbsp;No tienes rutas asignadas.</div>
        </div>
        <form ng-submit="actualizarStock()" ng-show="listaComercios.length > 0">
            <div class="list card">
                <div class="item item-divider">
                    <a class="text-right">Comercio</a>
                </div>
                <a class="item">
                    <select class="rmw-input-select"
                            ng-options="com as com.nombre for com in listaComercios track by com.id"
                            ng-model="comercio"
                            ng-change="updateListaProductos(comercio)">
                    </select>
                </a>
                <div ng-repeat="producto in listaProductos track by producto.id" class="rmw-stock-container">
                    <div  class="item item-divider">
                        <h2 class="text-left positive">{{producto.nombre}}</h2>
                    </div>
                    <div class="item item-thumbnail-left">
                        <img ng-src="{{producto.imagen}}"/>
                        <div class="range rmw-range">
                            <i class="icon ion-ios-minus-outline"></i>
                            <input type="range" range-parser ng-init="producto.cantidad = producto.stock" value="{{producto.cantidad}}" ng-model="producto.cantidad" min="0" max="{{producto.stock}}">
                            <i class="icon ion-ios-plus-outline"></i>
                            <div class="rmw-input-stock">
                                <input type="number" class="rmw-input-stock" ng-model="producto.cantidad" ng-value="producto.cantidad" max="{{producto.stock}}">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="text-center">
                <button type="submit" class="button button-positive">Actualizar Stock</button>
            </div>
        </form>
    </ion-content>
</ion-view>